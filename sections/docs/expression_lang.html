<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, shrink-to-fit=no">
    <link rel="icon" type="image/png" sizes="32x32" href="/magnanimous/images/ico/favicon-32x32.png">
    <link rel="icon" type="image/png" sizes="16x16" href="/magnanimous/images/ico/favicon-16x16.png">
    <title>Expression Language</title>
    <link rel="stylesheet" href="/magnanimous/css/styles.css">
    <link rel="stylesheet" href="/magnanimous/css/docs.css">
</head>
<div class="docs-top">
    <img src="/magnanimous/images/magnanimous-car-mini.jpg" width="60em" alt="Magnanimous Gopher">
    <span class="docs-link">
        <a href="/magnanimous/sections/docs.html">Magnanimous Documentation</a>
    </span>
</div>
<div class="main-body">
<h1>2. Expression Language</h1>

<p>Magnanimous defines a very simple <em>expression language</em> that is used to <strong>process</strong> documents in the <code>source/processed</code>
directory.</p>

<p>This expression language is composed solely of instructions. Each instruction has the following form:</p>
<pre tabindex="0" style="background-color:#fff;"><code><span style="display:flex;"><span>{{ instruction-name args }}
</span></span></code></pre>
<p><em>Where:</em></p>

<ul>
<li><code>instruction-name</code> - the name of the instruction to be used.</li>
<li><code>args</code> - optional arguments for the instruction. Its syntax is instruction-dependent.</li>
</ul>

<p>Only a single instruction may be present within double-braces (i.e. between <code>{{</code> and <code>}}</code>).</p>

<p>Here&rsquo;s a list of all Magnanimous instructions:</p>

<ul>
<li><a href="#define"><code>define</code></a>         - defines a variable. Its value is given by an <a href="#expressions">expression</a>.</li>
<li><a href="#eval"><code>eval</code></a>             - evaluates an <a href="#expressions">expression</a> and inserts the result into the current position.</li>
<li><a href="#include"><code>include</code></a>       - includes contents of another file into the current position.</li>
<li><a href="#includeB64"><code>includeB64</code></a> - includes base64-encoded contents of file into the current position.</li>
<li><a href="#includeRaw"><code>includeRaw</code></a> - includes the raw contents (no processing) of file into the current position.</li>
<li><a href="#component"><code>component</code></a>   - includes a <a href="components.html">Component</a> into the current position.</li>
<li><a href="#slot"><code>slot</code></a>             - defines a variable whose content is the body of the instruction.</li>
<li><a href="#if"><code>if</code></a>                 - conditionally includes some content into the current position.</li>
<li><a href="#for"><code>for</code></a>               - repeats some content for each item in an <a href="#iterables">iterable</a>.</li>
<li><a href="#doc"><code>doc</code></a>               - allows documentation to be added to sources (not included in the resource).</li>
<li><a href="#end"><code>end</code></a>               - ends a scoped instruction (<code>component</code>, <code>slot</code>, <code>if</code> and <code>for</code>).</li>
</ul>
<div style="height: 1em;"></div>
<h2 id="instructions" class="link-header-component">
<a href="#instructions"><img src="/magnanimous/images/link.svg"></a>
<span>Instructions</span>
</h2>
<p>In this section, we&rsquo;ll see details about every available instruction in Magnanimous, and how to use them.</p>
<div style="height: 1em;"></div>
<h3 id="define" class="link-header-component">
<a href="#define"><img src="/magnanimous/images/link.svg"></a>
<span>define</span>
</h3>
<h4>Syntax:</h4>
<pre tabindex="0" style="background-color:#fff;"><code><span style="display:flex;"><span>{{ define &lt;variable-name&gt; &lt;expression&gt; }}
</span></span></code></pre>
<p><em>where:</em></p>

<ul>
<li><code>variable-name</code> is an <a href="#identifiers">identifier</a>.</li>
<li><code>expression</code> is an <a href="#expressions">expression</a>.</li>
</ul>

<p>The <code>define</code> instruction is used to <em>define</em> a variable that can later be used in one or more expressions.</p>

<p>For example, the following instruction defines a variable called <code>text</code> with the value <code>Hello Magnanimous</code>:</p>
<pre tabindex="0" style="background-color:#fff;"><code><span style="display:flex;"><span>{{ define text &#34;Hello Magnanimous&#34; }}
</span></span></code></pre>
<p>After this declaration, any expression where the <code>text</code> variable is used will have its value, <code>Hello Magnanimous</code>,
used upon evaluation.</p>

<p>For example, we could add the following definition after the one we&rsquo;ve just shown above:</p>
<pre tabindex="0" style="background-color:#fff;"><code><span style="display:flex;"><span>{{ define other_text text + &#34;, this is great!&#34; }}
</span></span></code></pre>
<p>Because <code>text</code> was previously defined as <code>Hello Magnanimous</code>, this definition results in <code>other_text</code> getting the value
<code>Hello Magnanimous, this is great!</code>!</p>

<p>See <a href="#expressions">Expressions</a> for more details about the kind of expressions you can use.</p>
<div style="height: 1em;"></div>
<h3 id="eval" class="link-header-component">
<a href="#eval"><img src="/magnanimous/images/link.svg"></a>
<span>eval</span>
</h3>
<h4>Syntax:</h4>
<pre tabindex="0" style="background-color:#fff;"><code><span style="display:flex;"><span>{{ eval &lt;expression&gt; }}
</span></span></code></pre>
<p><em>where:</em></p>

<ul>
<li><code>expression</code> is an <a href="#expressions">expression</a>.</li>
</ul>

<p>The <code>eval</code> instruction is similar to <code>define</code>, except that the result of the expression is inserted into the
processed document instead of being set to a variable.</p>

<p>As an example, suppose you have the following <em>md</em> file:</p>
<pre tabindex="0" style="background-color:#fff;"><code><span style="display:flex;"><span><span style="color:#444">## The dog is {{ eval &#34;big&#34; }}
</span></span></span></code></pre>
<p>After processing, this file would be turned into HTML and its instructions processed, resulting in the following
content:</p>
<pre tabindex="0" style="background-color:#fff;"><code><span style="display:flex;"><span><span style="color:#888">&lt;</span><span style="color:#2838b0">h2</span><span style="color:#888"></span><span style="color:#888">&gt;</span>The dog is big<span style="color:#888">&lt;</span><span style="color:#888">/</span><span style="color:#2838b0">h2</span><span style="color:#888">&gt;</span>
</span></span></code></pre>
<p>Of course, <code>eval</code> is mostly useful when combined with variables, <a href="#slot">slots</a> and expressions.</p>

<p>For example, you could define a number of variables beforehand, to be used later in several other places
(so you could change them in only one place if you ever changed your mind about their values):</p>
<pre tabindex="0" style="background-color:#fff;"><code><span style="display:flex;"><span>{{ define title &#34;OurWebsite&#34; }}\
</span></span><span style="display:flex;"><span>{{ define visitorsPerMonth 10000 }}\
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>The best website in the world, {{ eval title }}, has an average number of
</span></span><span style="display:flex;"><span>{{ eval visitorsPerMonth / 30 }} visitors per day!
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>Many people love {{ eval title }} because it is so great!  
</span></span></code></pre>
<blockquote>
<p>You may have noticed that instructions often end with a <code>\</code> character. That&rsquo;s to avoid a new-line
  character being inserted where the instructions were in the source file, as the <code>\</code> can escape new lines.</p>
</blockquote>
<div style="height: 1em;"></div>
<h3 id="include" class="link-header-component">
<a href="#include"><img src="/magnanimous/images/link.svg"></a>
<span>include</span>
</h3>
<h4>Syntax:</h4>
<pre tabindex="0" style="background-color:#fff;"><code><span style="display:flex;"><span>{{ include &lt;path&gt; }}
</span></span></code></pre>
<p><em>where:</em></p>

<ul>
<li><code>path</code> is a <a href="paths.html">path</a> to another file.</li>
</ul>

<p>The <code>include</code> statement is used to include the contents of a file into another file.</p>

<p>Example:</p>
<pre tabindex="0" style="background-color:#fff;"><code><span style="display:flex;"><span><span style="color:#888">&lt;</span><span style="color:#2838b0">div</span> <span style="color:#388038">id</span><span style="color:#666">=</span><span style="color:#b83838">&#34;other-file-contents&#34;</span><span style="color:#888"></span><span style="color:#888">&gt;</span>
</span></span><span style="display:flex;"><span>{{ include path/to/other/file.md }}
</span></span><span style="display:flex;"><span><span style="color:#888">&lt;</span><span style="color:#888">/</span><span style="color:#2838b0">div</span><span style="color:#888">&gt;</span>
</span></span></code></pre>
<blockquote>
<p>When a markdown file includes a non-markdown file, the included contents are not treated as markdown.
If you want that to hapen, you can define a variable called <code>_forceMarkdown</code> with a non-null value.
For example, <code>{{ define _forceMarkdown 1 }}</code>.</p>
</blockquote>

<p>Notice that paths can be <a href="#expressions">expressions</a> if starting with <code>&quot;</code> or <code>`</code>,
or explicitly with <code>eval &lt;expr&gt;</code>:</p>
<pre tabindex="0" style="background-color:#fff;"><code><span style="display:flex;"><span><span style="color:#888;font-style:italic">&lt;!--</span><span style="color:#888;font-style:italic"> Include expression path </span><span style="color:#888;font-style:italic">--&gt;</span>
</span></span><span style="display:flex;"><span>{{ include &#34;other/&#34; + fileName }}
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#888;font-style:italic">&lt;!--</span><span style="color:#888;font-style:italic"> Include evaluated path </span><span style="color:#888;font-style:italic">--&gt;</span>
</span></span><span style="display:flex;"><span>{{ include eval fileName + &#34;2&#34; }}
</span></span></code></pre>
<p>Paths may be absolute, relative or <em>up-paths</em> (i.e. paths that refer to a file at the same directory, or a directory
up the source tree from the current file being written).</p>

<p>Absolute path example: <code>/processed/partials/_header.html</code></p>

<p>Relative path example: <code>partials/_header.html</code></p>

<p>Up-path example: <code>.../_header.html</code></p>

<p>See <a href="paths.html">Paths and Links</a> for more details.</p>
<div style="height: 1em;"></div>
<h3 id="includeB64" class="link-header-component">
<a href="#includeB64"><img src="/magnanimous/images/link.svg"></a>
<span>includeB64</span>
</h3>
<h4>Syntax:</h4>
<pre tabindex="0" style="background-color:#fff;"><code><span style="display:flex;"><span>{{ includeB64 &lt;path&gt; }}
</span></span></code></pre>
<p><em>where:</em></p>

<ul>
<li><code>path</code> is a <a href="paths.html">path</a> to another file.</li>
</ul>

<p>The <code>includeB64</code> statement is used to include the <a href="https://wikipedia.org/wiki/Base64">base64</a>-encoded contents of a file into another file.</p>

<p>Example:</p>
<pre tabindex="0" style="background-color:#fff;"><code><span style="display:flex;"><span><span style="color:#888;font-style:italic">&lt;!--</span><span style="color:#888;font-style:italic"> include a gif file encoded as a data URL </span><span style="color:#888;font-style:italic">--&gt;</span>
</span></span><span style="display:flex;"><span><span style="color:#888">&lt;</span><span style="color:#2838b0">img</span> <span style="color:#388038">src</span><span style="color:#666">=</span><span style="color:#b83838">&#34;data:image/gif;base64,{{ includeB64 path/to/file.gif }}&#34;</span><span style="color:#888"></span><span style="color:#888">&gt;</span>
</span></span></code></pre>
<p>See the <a href="#include">include</a> documentation for more information about paths that may be used.</p>
<div style="height: 1em;"></div>
<h3 id="includeRaw" class="link-header-component">
<a href="#includeRaw"><img src="/magnanimous/images/link.svg"></a>
<span>includeRaw</span>
</h3>
<h4>Syntax:</h4>
<pre tabindex="0" style="background-color:#fff;"><code><span style="display:flex;"><span>{{ includeRaw &lt;path&gt; }}
</span></span></code></pre>
<p><em>where:</em></p>

<ul>
<li><code>path</code> is a <a href="paths.html">path</a> to another file.</li>
</ul>

<p>The <code>includeRaw</code> statement is used to include the raw (unprocessed) contents of a file into another file.</p>

<p>See the <a href="#include">include</a> documentation for more information about paths that may be used.</p>
<div style="height: 1em;"></div>
<h3 id="component" class="link-header-component">
<a href="#component"><img src="/magnanimous/images/link.svg"></a>
<span>component</span>
</h3>
<h4>Syntax:</h4>
<pre tabindex="0" style="background-color:#fff;"><code><span style="display:flex;"><span>{{ component &lt;path&gt; }}
</span></span><span style="display:flex;"><span>&lt;content&gt;
</span></span><span style="display:flex;"><span>{{ end }}
</span></span></code></pre>
<p><em>where:</em></p>

<ul>
<li><code>path</code> is a <a href="paths.html">path</a> to another file.</li>
<li><code>content</code> the body of the component.</li>
</ul>

<p>The <code>component</code> instruction is quite similar to <code>include</code>. It also includes the contents of another file,
the component file (which is usually designed specifically for this purpose), into the file using it.</p>

<p>However, components are more powerful as they may also declare some content which can be placed anywhere inside the
component (typically using <code>slot</code>s).</p>

<p>Example:</p>

<p>A simple component that displays its contents inside a <code>div</code> element, with an optional custom class:</p>
<pre tabindex="0" style="background-color:#fff;"><code><span style="display:flex;"><span><span style="color:#888">&lt;</span><span style="color:#2838b0">div</span> <span style="color:#388038">class</span><span style="color:#666">=</span><span style="color:#b83838">&#34;{{ eval cssClass || `component-example` }}&#34;</span><span style="color:#888"></span><span style="color:#888">&gt;</span>
</span></span><span style="display:flex;"><span>{{ eval __contents__ }}
</span></span><span style="display:flex;"><span><span style="color:#888">&lt;</span><span style="color:#888">/</span><span style="color:#2838b0">div</span><span style="color:#888">&gt;</span>
</span></span></code></pre>
<p>Including the above component in another file:</p>
<pre tabindex="0" style="background-color:#fff;"><code><span style="display:flex;"><span>{{ component path/to/component.html }}
</span></span><span style="display:flex;"><span>{{ define cssClass &#34;large-text&#34; }}
</span></span><span style="display:flex;"><span>Include this in my component.
</span></span><span style="display:flex;"><span>{{ end }}
</span></span></code></pre>
<p>See <a href="components.html">Components</a> for more details about using components.</p>
<div style="height: 1em;"></div>
<h3 id="slot" class="link-header-component">
<a href="#slot"><img src="/magnanimous/images/link.svg"></a>
<span>slot</span>
</h3>
<h4>Syntax:</h4>
<pre tabindex="0" style="background-color:#fff;"><code><span style="display:flex;"><span>{{ slot &lt;slot-name&gt; }}
</span></span><span style="display:flex;"><span>&lt;content&gt;
</span></span><span style="display:flex;"><span>{{ end }}
</span></span></code></pre>
<p><em>where:</em></p>

<ul>
<li><code>slot-name</code> the name of this slot.</li>
<li><code>content</code> the content the slot evaluates to.</li>
</ul>

<p>A <code>slot</code> instruction, like <a href="#define"><code>define</code></a>, defines a variable and does not include any content at the location where it is
declared. But unlike <code>define</code>, <code>slot</code> uses the body of its declaration as it value.</p>

<p>That means that evaluating the variable defined by <code>slot</code> with <a href="#eval"><code>eval</code></a> results in the body of the slot
being inserted into the processed document.</p>

<p>Slots are commonly used together with <a href="components.html">Components</a> (but may also be used on their own), so they are
explained in more detail in the <a href="components.html">Components</a> page.</p>
<div style="height: 1em;"></div>
<h3 id="if" class="link-header-component">
<a href="#if"><img src="/magnanimous/images/link.svg"></a>
<span>if</span>
</h3>
<h4>Syntax:</h4>
<pre tabindex="0" style="background-color:#fff;"><code><span style="display:flex;"><span>{{ if &lt;expression&gt; }}
</span></span><span style="display:flex;"><span>&lt;content&gt;
</span></span><span style="display:flex;"><span>{{ end }}
</span></span></code></pre>
<p><em>where:</em></p>

<ul>
<li><code>expression</code> is an <a href="#expressions">expression</a>, expected to evaluate to a boolean (<code>true</code> or <code>false</code>).</li>
<li><code>content</code> is some content that will be included in the document if <code>&lt;expression&gt;</code> is true.</li>
</ul>

<p>The <code>if</code> instruction can be used to include some content in a document only if some condition is true.</p>

<p>For example, you may want to include a certain CSS class on an element only if it&rsquo;s the currently active element:</p>
<pre tabindex="0" style="background-color:#fff;"><code><span style="display:flex;"><span><span style="color:#888">&lt;</span><span style="color:#2838b0">div</span> <span style="color:#388038">class</span><span style="color:#666">=</span><span style="color:#b83838">&#34;{{ if currentPage == page }}active{{ end }}&#34;</span><span style="color:#888"></span><span style="color:#888">&gt;</span><span style="color:#888">&lt;</span><span style="color:#888">/</span><span style="color:#2838b0">div</span><span style="color:#888">&gt;</span>
</span></span></code></pre><div style="height: 1em;"></div>
<h3 id="for" class="link-header-component">
<a href="#for"><img src="/magnanimous/images/link.svg"></a>
<span>for</span>
</h3>
<h4>Syntax:</h4>
<pre tabindex="0" style="background-color:#fff;"><code><span style="display:flex;"><span>{{ for &lt;variable-name&gt; [ (&lt;for-instruction&gt;...) ] &lt;iterable&gt; }}
</span></span><span style="display:flex;"><span>&lt;content&gt;
</span></span><span style="display:flex;"><span>{{ end }}
</span></span></code></pre>
<p><em>where:</em></p>

<ul>
<li><code>variable-name</code> is an <a href="#identifiers">identifier</a> to be bound for each item of <code>&lt;iterable&gt;</code>.</li>
<li><code>for-instruction</code> instructions for iteration (see below).</li>
<li><code>iterable</code> is an <a href="#iterables">iterable</a>.</li>
<li><code>content</code> is some content to be repeatedly included in the document, once for each item.</li>
</ul>
<div style="height: 1em;"></div>
<h4 id="for-instructions" class="link-header-component">
<a href="#for-instructions"><img src="/magnanimous/images/link.svg"></a>
<span>for sub-instructions</span>
</h4>
<ul>
<li><code>sort</code>            - sort the elements alphabetically.</li>
<li><code>sortBy &lt;field&gt;</code>  - sort the file items by the value of some property.</li>
<li><code>reverse</code>         - reverse the order of the items.</li>
<li><code>limit &lt;max&gt;</code>     - limit the number of items to include.</li>
</ul>

<p>The <code>for</code> instruction allows some content to be repeated for each item of an <a href="#iterables">iterable</a>.</p>

<p>For example, you could use an <em>array</em> to iterate over some values, including the same content for each item:</p>
<pre tabindex="0" style="background-color:#fff;"><code><span style="display:flex;"><span>{{ for item [&#34;Home&#34;, &#34;About&#34;, &#34;Documentation&#34;] }}
</span></span><span style="display:flex;"><span><span style="color:#888">&lt;</span><span style="color:#2838b0">div</span><span style="color:#888"></span><span style="color:#888">&gt;</span>{{ eval item }}<span style="color:#888">&lt;</span><span style="color:#888">/</span><span style="color:#2838b0">div</span><span style="color:#888">&gt;</span>
</span></span><span style="display:flex;"><span>{{ end }}
</span></span></code></pre>
<p>More commonly, the <code>for</code> instruction is used to show properties of files in a certain directory.</p>

<p>Example:</p>
<pre tabindex="0" style="background-color:#fff;"><code><span style="display:flex;"><span>{{ for item (sortBy date reverse limit 10) /path/to/directory }}
</span></span><span style="display:flex;"><span><span style="color:#888">&lt;</span><span style="color:#2838b0">div</span><span style="color:#888"></span><span style="color:#888">&gt;</span>Date: {{ eval item.date }}<span style="color:#888">&lt;</span><span style="color:#888">/</span><span style="color:#2838b0">div</span><span style="color:#888">&gt;</span>
</span></span><span style="display:flex;"><span><span style="color:#888">&lt;</span><span style="color:#2838b0">div</span><span style="color:#888"></span><span style="color:#888">&gt;</span>Post name: {{ eval item.name }}<span style="color:#888">&lt;</span><span style="color:#888">/</span><span style="color:#2838b0">div</span><span style="color:#888">&gt;</span>
</span></span><span style="display:flex;"><span>{{ end }}
</span></span></code></pre>
<p>Notice that the path is not normally given as an <a href="#expressions">expression</a>, but as simple text
(notice that the path is not wrapped into double-quotes).
If you need to pass in an expression, or just a variable instead of a hardcoded path, you must call <code>eval</code> first:</p>
<pre tabindex="0" style="background-color:#fff;"><code><span style="display:flex;"><span>{{ define postDirectories &#34;/path/to/directory&#34; }}
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#888;font-style:italic">&lt;!--</span><span style="color:#888;font-style:italic"> Somewhere else in the file </span><span style="color:#888;font-style:italic">--&gt;</span>
</span></span><span style="display:flex;"><span>{{ for item eval postDirectories }}
</span></span><span style="display:flex;"><span><span style="color:#888">&lt;</span><span style="color:#2838b0">div</span><span style="color:#888"></span><span style="color:#888">&gt;</span>Date: {{ eval item.date }}<span style="color:#888">&lt;</span><span style="color:#888">/</span><span style="color:#2838b0">div</span><span style="color:#888">&gt;</span>
</span></span><span style="display:flex;"><span><span style="color:#888">&lt;</span><span style="color:#2838b0">div</span><span style="color:#888"></span><span style="color:#888">&gt;</span>Post name: {{ eval item.name }}<span style="color:#888">&lt;</span><span style="color:#888">/</span><span style="color:#2838b0">div</span><span style="color:#888">&gt;</span>
</span></span><span style="display:flex;"><span>{{ end }}
</span></span></code></pre>
<p>See <a href="#iterables">Iterables</a> for details about what iterable types can be used with the <code>for</code> instruction.</p>
<div style="height: 1em;"></div>
<h3 id="doc" class="link-header-component">
<a href="#doc"><img src="/magnanimous/images/link.svg"></a>
<span>doc</span>
</h3>
<h4>Syntax:</h4>
<pre tabindex="0" style="background-color:#fff;"><code><span style="display:flex;"><span>{{ doc &lt;text&gt; }}
</span></span></code></pre>
<p><em>where:</em></p>

<ul>
<li><code>text</code> can be any text (excluding <code>}}</code>, which ends the instruction).</li>
</ul>

<p>The <code>doc</code> instruction is used to document your templates and does not produce any visible output in generated
documents.</p>

<p>You can use it to make clear what some complex parts of your templates work, or document the variables expected to
be set for a <a href="components.html">Component</a>, for example.</p>
<div style="height: 1em;"></div>
<h3 id="end" class="link-header-component">
<a href="#end"><img src="/magnanimous/images/link.svg"></a>
<span>end</span>
</h3>
<h4>Syntax:</h4>
<pre tabindex="0" style="background-color:#fff;"><code><span style="display:flex;"><span>{{ end }}
</span></span></code></pre>
<p><code>end</code> is not an independent instruction; it is used to end the scope of a previously started scoped instruction.</p>

<p>It does not accept any argument.</p>

<p>All scoped instructions must always be finalized with an <code>{{ end }}</code>.</p>

<p>Scoped instructions are:</p>

<ul>
<li><code>component</code></li>
<li><code>slot</code></li>
<li><code>if</code></li>
<li><code>for</code></li>
</ul>

<p>Each <code>end</code> instruction always matches the nearest unclosed scoped instruction.</p>
<div style="height: 1em;"></div><hr>
<div style="height: 1em;"></div>
<h2 id="expressions" class="link-header-component">
<a href="#expressions"><img src="/magnanimous/images/link.svg"></a>
<span>Expressions</span>
</h2>
<p>Magnanimous expressions use a syntax that&rsquo;s similar to C-like languages, including Java, JavaScript and Go.</p>

<p>For example, the following are all valid expressions:</p>
<pre tabindex="0" style="background-color:#fff;"><code><span style="display:flex;"><span><span style="color:#444">2</span>
</span></span><span style="display:flex;"><span><span style="color:#444">2</span> <span style="color:#666">+</span> <span style="color:#444">2.42</span>
</span></span><span style="display:flex;"><span><span style="color:#888">(</span><span style="color:#444">5</span> <span style="color:#666">*</span> <span style="color:#444">2</span><span style="color:#888">)</span> <span style="color:#666">-</span> <span style="color:#444">10</span>
</span></span><span style="display:flex;"><span>variable <span style="color:#666">==</span> <span style="color:#444;font-style:italic">true</span>
</span></span><span style="display:flex;"><span><span style="color:#666">!</span>negated <span style="color:#666">==</span> <span style="color:#444;font-style:italic">false</span>
</span></span><span style="display:flex;"><span>something <span style="color:#666">+</span> other <span style="color:#666">!=</span> <span style="color:#b83838">&#34;hello&#34;</span> <span style="color:#666">+</span> yet_another
</span></span><span style="display:flex;"><span>thing <span style="color:#666">==</span> <span style="color:#444;font-style:italic">null</span>
</span></span><span style="display:flex;"><span><span style="color:#b83838">`</span><span style="color:#b83838">multiline
</span></span></span><span style="display:flex;"><span><span style="color:#b83838">string</span><span style="color:#b83838">`</span>
</span></span><span style="display:flex;"><span><span style="color:#888">[</span><span style="color:#444">1</span><span style="color:#888">,</span> <span style="color:#444">2</span><span style="color:#888">,</span> <span style="color:#444">3</span><span style="color:#888">,</span> <span style="color:#444">4</span><span style="color:#888">]</span>
</span></span><span style="display:flex;"><span>path<span style="color:#888">[</span><span style="color:#b83838">&#34;path/to/some/file.html&#34;</span><span style="color:#888">]</span>
</span></span><span style="display:flex;"><span>date<span style="color:#888">[</span><span style="color:#b83838">&#34;2019-03-20&#34;</span><span style="color:#888">]</span>
</span></span><span style="display:flex;"><span>date<span style="color:#888">[</span><span style="color:#b83838">&#34;now&#34;</span><span style="color:#888">]</span>
</span></span><span style="display:flex;"><span>date<span style="color:#888">[</span>some_path<span style="color:#888">]</span>
</span></span><span style="display:flex;"><span>date<span style="color:#888">[</span><span style="color:#b83838">&#34;2019-03-20T08:24:00&#34;</span><span style="color:#888">]</span><span style="color:#888">[</span><span style="color:#b83838">&#34;Mon Jan 2 15:04:05 2006&#34;</span><span style="color:#888">]</span>
</span></span></code></pre>
<p>The above expressions include all types of variables available:</p>

<ul>
<li>Strings: double-quoted as in <code>&quot;hello&quot;&quot;</code>.</li>
<li>Multiline Srings: delimited with back-ticks: <code>`example`</code>.</li>
<li>Numbers: like <code>2</code> or <code>2.42</code>.</li>
<li>Booleans: <code>true</code> or <code>false</code>.</li>
<li>Null: the <code>null</code> value (i.e. a variable that has not been defined).</li>
<li>Array: arrays of values of any type (can be used with the <a href="#for">for</a> instruction.</li>
<li>Dates: see the dates section below for details.</li>
</ul>

<p>They also show the use of <em>variables</em>, such as <code>variable</code> and <code>negated</code> above, which must be declared via the
<a href="#define">define</a> instruction.</p>

<p>The names of the variables must be valid <em>identifiers</em>, as we&rsquo;ll see below.</p>
<div style="height: 1em;"></div>
<h3 id="identifiers" class="link-header-component">
<a href="#identifiers"><img src="/magnanimous/images/link.svg"></a>
<span>Identifiers</span>
</h3>
<p><em>Identifiers</em> are used to name variables declared with the <a href="#define">define</a> instruction.</p>

<p>They must start with a letter or <code>_</code>, but may contain any of the following characters:</p>

<ul>
<li><code>a-z</code></li>
<li><code>A-Z</code></li>
<li><code>0-9</code></li>
<li><code>_</code></li>
</ul>

<p>Examples of valid identifiers:</p>
<pre tabindex="0" style="background-color:#fff;"><code><span style="display:flex;"><span>hello
</span></span><span style="display:flex;"><span>_first_character
</span></span><span style="display:flex;"><span>abs123
</span></span><span style="display:flex;"><span>CONSTANT_1
</span></span></code></pre><div style="height: 1em;"></div>
<h3 id="operators" class="link-header-component">
<a href="#operators"><img src="/magnanimous/images/link.svg"></a>
<span>Operators</span>
</h3>
<p>As shown above, expressions may comprise identifiers, numbers, Strings and also operators.</p>

<p>The following operators are supported:</p>

<h4>Arithmetic operators</h4>

<ul>
<li><code>+</code> - addition</li>
<li><code>-</code> - subtraction</li>
<li><code>*</code> - multiplication</li>
<li><code>/</code> - division</li>
<li><code>%</code> - remainder</li>
</ul>

<h4>Comparison operators</h4>

<ul>
<li><code>&gt;</code>  - greater than</li>
<li><code>&gt;=</code> - greater than or equal</li>
<li><code>&lt;</code>  - less than</li>
<li><code>&lt;=</code> - less than or equal</li>
<li><code>==</code> - equal</li>
<li><code>!=</code> - not-equal</li>
</ul>

<h4>Boolean operators</h4>

<ul>
<li><code>&amp;&amp;</code> - AND</li>
<li><code>||</code> - OR</li>
<li><code>!</code>  - NOT</li>
</ul>

<p>The <code>||</code> (OR) operator can be used to declare default values for variables that may be missing a value.</p>

<p>For example, in the following <a href="#eval">eval</a> declaration, the document should get the value of the <code>example_var</code>
if it&rsquo;s been defined, <em>or</em> the default value, <code>Not here</code>, otherwise.</p>
<pre tabindex="0" style="background-color:#fff;"><code><span style="display:flex;"><span>{{ eval example_var || &#34;Not here&#34; }}
</span></span></code></pre>
<h4>Dates</h4>

<p>Dates are represented in the following full format (some parts are optional, as we&rsquo;ll see):</p>
<pre tabindex="0" style="background-color:#fff;"><code><span style="display:flex;"><span>date<span style="color:#888">[</span><span style="color:#b83838">&#34;2018-03-20T22:55:00&#34;</span><span style="color:#888">]</span><span style="color:#888">[</span><span style="color:#b83838">&#34;Mon Jan 2 15:04:05 2006&#34;</span><span style="color:#888">]</span>
</span></span></code></pre>
<p>The String between the first brackets is the actual date value, <code>20th of March 2018, 10:55:00AM</code> in this example,
and the second is the optional layout, which uses the fixed date-time <code>02nd of January 2006, 03:04:05PM</code> as a
layout-by-example (this is copied from the <a href="https://golang.org/pkg/time/#Time.Format">Go Time Formatter</a>).</p>

<p>If not given, the following layout is used:</p>
<pre tabindex="0" style="background-color:#fff;"><code><span style="display:flex;"><span>02 Jan 2006, 03:04 PM
</span></span></code></pre>
<p>The first String can also be <code>&quot;now&quot;</code> to evaluate the current time (when Magnanimous is running):</p>
<pre tabindex="0" style="background-color:#fff;"><code><span style="display:flex;"><span>date<span style="color:#888">[</span><span style="color:#b83838">&#34;now&#34;</span><span style="color:#888">]</span>
</span></span></code></pre>
<p>When a path value is given to <code>date</code>, it resolves to the time the relevant file was last updated.</p>
<pre tabindex="0" style="background-color:#fff;"><code><span style="display:flex;"><span><span style="color:#888">{</span><span style="color:#888">{</span> define p1 path<span style="color:#888">[</span><span style="color:#b83838">&#34;path/to/file.txt&#34;</span><span style="color:#888">]</span> <span style="color:#888">}</span><span style="color:#888">}</span>
</span></span><span style="display:flex;"><span>File path<span style="color:#666">/</span>to<span style="color:#666">/</span>file<span style="color:#888">.</span>txt was last updated on <span style="color:#888">{</span><span style="color:#888">{</span> <span style="color:#388038">eval</span> date<span style="color:#888">[</span>p1<span style="color:#888">]</span> <span style="color:#888">}</span><span style="color:#888">}</span>
</span></span></code></pre>
<p>To make things clearer, here are a few examples:</p>

<table>
<thead>
<tr>
<th>Date expression</th>
<th>Evaluated result</th>
</tr>
</thead>

<tbody>
<tr>
<td><code>date[&quot;2018-03-20T22:55:00&quot;][&quot;Mon Jan 2 15:04:05 2006&quot;]</code></td>
<td><code>Tue Mar 20 22:55:00 2018</code></td>
</tr>

<tr>
<td><code>date[&quot;2018-03-20T22:55&quot;][&quot;2 Jan 2006 03:04:05PM&quot;]</code></td>
<td><code>20 Mar 2018 10:55:00PM</code></td>
</tr>

<tr>
<td><code>date[&quot;2018-03-20&quot;][&quot;2 Jan 2006&quot;]</code></td>
<td><code>20 Mar 2018</code></td>
</tr>

<tr>
<td><code>date[&quot;2018-03-20&quot;]</code></td>
<td><code>20 Mar 2018, 12:00 AM</code></td>
</tr>

<tr>
<td><code>date[&quot;2018-03-20T22:55&quot;]</code></td>
<td><code>20 Mar 2018, 10:55 PM</code></td>
</tr>

<tr>
<td><code>date[&quot;now&quot;][&quot;2016&quot;]</code></td>
<td><code>2019</code> (current year)</td>
</tr>
</tbody>
</table>
<div style="height: 1em;"></div>
<h2 id="iterables" class="link-header-component">
<a href="#iterables"><img src="/magnanimous/images/link.svg"></a>
<span>Iterables</span>
</h2>
<p>Iterables are collections of values which can be used with the <a href="#for">for</a> instruction.</p>

<p>They can be of two types:</p>

<ul>
<li>Arrays.</li>
<li>Paths to directories.</li>
</ul>

<h4>Arrays</h4>

<p>Arrays have the following form:</p>
<pre tabindex="0" style="background-color:#fff;"><code><span style="display:flex;"><span>[ expr1, expr2 ... ]
</span></span></code></pre>
<p>Examples:</p>
<pre tabindex="0" style="background-color:#fff;"><code><span style="display:flex;"><span><span style="color:#888">{</span><span style="color:#888">{</span> <span style="color:#2838b0">for</span> number <span style="color:#888">[</span><span style="color:#444">1</span><span style="color:#888">,</span> <span style="color:#444">2</span><span style="color:#888">,</span> <span style="color:#444">3</span><span style="color:#888">,</span> <span style="color:#444">4</span><span style="color:#888">,</span> <span style="color:#444">5</span><span style="color:#888">]</span> <span style="color:#888">}</span><span style="color:#888">}</span><span style="color:#888">{</span><span style="color:#888">{</span> end <span style="color:#888">}</span><span style="color:#888">}</span>
</span></span><span style="display:flex;"><span><span style="color:#888">{</span><span style="color:#888">{</span> <span style="color:#2838b0">for</span> word <span style="color:#888">[</span> <span style="color:#b83838">&#34;ABC&#34;</span> <span style="color:#888">]</span> <span style="color:#888">}</span><span style="color:#888">}</span><span style="color:#888">{</span><span style="color:#888">{</span> end <span style="color:#888">}</span><span style="color:#888">}</span>
</span></span><span style="display:flex;"><span><span style="color:#888">{</span><span style="color:#888">{</span> <span style="color:#2838b0">for</span> section <span style="color:#888">[</span> <span style="color:#b83838">&#34;Home&#34;</span><span style="color:#888">,</span> <span style="color:#b83838">&#34;About&#34;</span><span style="color:#888">,</span> <span style="color:#b83838">&#34;Docs&#34;</span> <span style="color:#888">]</span> <span style="color:#888">}</span><span style="color:#888">}</span><span style="color:#888">{</span><span style="color:#888">{</span> end <span style="color:#888">}</span><span style="color:#888">}</span>
</span></span></code></pre>
<p>To iterate over an array defined elsewhere, the variable must be eval&rsquo;d:</p>
<pre tabindex="0" style="background-color:#fff;"><code><span style="display:flex;"><span><span style="color:#888">{</span><span style="color:#888">{</span> define array <span style="color:#888">[</span><span style="color:#444">1</span><span style="color:#888">,</span><span style="color:#444">2</span><span style="color:#888">,</span><span style="color:#444">3</span><span style="color:#888">]</span> <span style="color:#888">}</span><span style="color:#888">}</span>
</span></span><span style="display:flex;"><span><span style="color:#888">{</span><span style="color:#888">{</span> <span style="color:#2838b0">for</span> item <span style="color:#388038">eval</span> array <span style="color:#888">}</span><span style="color:#888">}</span>
</span></span><span style="display:flex;"><span>    <span style="color:#888">{</span><span style="color:#888">{</span> <span style="color:#388038">eval</span> item <span style="color:#888">}</span><span style="color:#888">}</span>
</span></span><span style="display:flex;"><span><span style="color:#888">{</span><span style="color:#888">{</span> end <span style="color:#888">}</span><span style="color:#888">}</span>
</span></span></code></pre>
<h4>Paths to directories</h4>

<p>A <code>for</code> expression may iterate over each file of a directory by declaring a <em>path</em> to a directory as its iterable.</p>

<p>For example, suppose there is a directory with the following contents:</p>
<pre tabindex="0" style="background-color:#fff;"><code><span style="display:flex;"><span>my-sections/
</span></span><span style="display:flex;"><span>    /something.md
</span></span><span style="display:flex;"><span>    /other.md
</span></span></code></pre>
<p>If each file <a href="#define">defines</a> a variable named <code>section_name</code>, for example, then a summary file could contain
the following <a href="#for">for</a> instruction to display the <code>section_name</code> of each file:</p>
<pre tabindex="0" style="background-color:#fff;"><code><span style="display:flex;"><span>{{ for section my-sections/ }}\
</span></span><span style="display:flex;"><span>  The name of the section is {{ eval section.section_name }}!
</span></span><span style="display:flex;"><span>{{ end }}\
</span></span></code></pre>
<p>See <a href="paths.html">Paths and Links</a> for more details about paths.</p>
</div>
<div class="footer">
    <div>
        <small>
            Back to <a href="/magnanimous/sections/docs.html">Documentation Home</a>
        </small>
    </div>
</div>
</body>
</html>