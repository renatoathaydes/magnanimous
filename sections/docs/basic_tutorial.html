<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, shrink-to-fit=no">
    <link rel="icon" type="image/png" sizes="32x32" href="/magnanimous/images/ico/favicon-32x32.png">
    <link rel="icon" type="image/png" sizes="16x16" href="/magnanimous/images/ico/favicon-16x16.png">
    <title>Basic Tutorial</title>
    <link rel="stylesheet" href="/magnanimous/css/styles.css">
    <link rel="stylesheet" href="/magnanimous/css/docs.css">
</head>
<div class="docs-top">
    <img src="/magnanimous/images/magnanimous-car-mini.jpg" width="60em" alt="Magnanimous Gopher">
    <span class="docs-link">
        <a href="/magnanimous/sections/docs.html">Magnanimous Documentation</a>
    </span>
</div>
<div class="main-body">
<h1>6. Basic Tutorial</h1>

<p>This is a basic tutorial of Magnanimous. The intention of this tutorial is to make you able of
using Magnanimous to create awesome website in the least amount of time possible, so let&rsquo;s get right
to the action!</p>

<blockquote>
<p>At the end of each section, a link to the relevant commit in the <a href="https://github.com/renatoathaydes/magnanimous-tutorial">GitHub Repo</a>
  containing the code written during this tutorial will be provided.</p>
</blockquote>

<h2>Part 1 - Website header, footer and home page</h2>

<p>In Part 1, we&rsquo;ll set up the basic parts of the website. Things like the header and footer most pages will share.</p>

<p>We&rsquo;ll also start creating the website&rsquo;s Home Page and get a HTTP server to serve it locally.</p>

<h3>1.1 Create the website&rsquo;s skeleton</h3>

<p>Before we can start building actual content, we need to build some scaffolding. This is the stuff that
will probably be present in all of your pages, including the main CSS styles, header and footer etc.</p>

<p>First of all, we need a root directory for our project:</p>
<pre style="background-color:#fff">$ mkdir my-website
$ cd my-website
</pre>
<p>Magnanimous expects all of your content to be put into the <code>source</code> directory.</p>

<p>Within that, there should be a <code>processed</code> directory for files that Magnanimous should process, and a <code>static</code>
directory for files which should simply be copied as they are.</p>

<p>Files that go into the <code>processed</code> directory can use <a href="expression_lang.html">Magnanimous instructions</a>, which let you
process the contents of a file by including other files into it, adding or removing things to it depending on certain
conditions, define and use variables to avoid repetition, and many other cool things, as we&rsquo;ll see later.</p>

<p>But continuing with the website skeleton: we&rsquo;ll also definitely need some CSS to make the website look great&hellip;
let&rsquo;s create a <code>css</code> directory under <code>static</code> to store the stylesheets:</p>
<pre style="background-color:#fff">$ mkdir -p source/static/css
$ mkdir -p source/processed
</pre>
<p>To keep with the minimalistic nature of Magnanimous, let&rsquo;s use a minimalistic CSS framework,
<a href="https://milligram.io">Milligram</a>, which will make it easy for us to create a good looking website at the cost of
adding a 2kb gzipped CSS file to our pages, which is about as cheap as it can get!</p>

<p>To get the Milligram CSS file, you can either download it from its <a href="https://cdnjs.com/libraries/milligram">CDN</a> or
install with NPM:</p>
<pre style="background-color:#fff">$ npm install milligram
$ cp node_modules/milligram/dist/milligram.min.css source/static/css
</pre>
<p>Great! We&rsquo;ve got our first website file (and we didn&rsquo;t have to write anything!)&hellip; now we need some HTML fragments
(incomplete pieces of HTML that will be used by other files to create complete HTML files).</p>

<p>Create a HTML header at <code>source/processed/_header.html</code> with the following contents:</p>
<pre style="background-color:#fff"><span style="color:#289870">&lt;!DOCTYPE html&gt;</span>
<span style="color:#888">&lt;</span><span style="color:#2838b0">html</span><span style="color:#888"></span><span style="color:#888">&gt;</span>
<span style="color:#888">&lt;</span><span style="color:#2838b0">head</span><span style="color:#888"></span><span style="color:#888">&gt;</span>
    <span style="color:#888">&lt;</span><span style="color:#2838b0">meta</span> <span style="color:#388038">charset</span><span style="color:#666">=</span><span style="color:#b83838">&#34;utf-8&#34;</span><span style="color:#888"></span><span style="color:#888">&gt;</span>
    <span style="color:#888">&lt;</span><span style="color:#2838b0">title</span><span style="color:#888"></span><span style="color:#888">&gt;</span>Magnanimous Tutorial Website<span style="color:#888">&lt;</span><span style="color:#888">/</span><span style="color:#2838b0">title</span><span style="color:#888">&gt;</span>
    <span style="color:#888">&lt;</span><span style="color:#2838b0">link</span> <span style="color:#388038">rel</span><span style="color:#666">=</span><span style="color:#b83838">&#34;stylesheet&#34;</span> <span style="color:#388038">href</span><span style="color:#666">=</span><span style="color:#b83838">&#34;/css/milligram.min.css&#34;</span><span style="color:#888"></span><span style="color:#888">&gt;</span>
<span style="color:#888">&lt;</span><span style="color:#888">/</span><span style="color:#2838b0">head</span><span style="color:#888">&gt;</span>
<span style="color:#888">&lt;</span><span style="color:#2838b0">body</span><span style="color:#888"></span><span style="color:#888">&gt;</span>
<span style="color:#888">&lt;</span><span style="color:#2838b0">header</span> <span style="color:#388038">id</span><span style="color:#666">=</span><span style="color:#b83838">&#34;home&#34;</span> <span style="color:#388038">class</span><span style="color:#666">=</span><span style="color:#b83838">&#34;header&#34;</span><span style="color:#888"></span><span style="color:#888">&gt;</span>
<span style="color:#888">&lt;</span><span style="color:#2838b0">section</span> <span style="color:#388038">class</span><span style="color:#666">=</span><span style="color:#b83838">&#34;container&#34;</span><span style="color:#888"></span><span style="color:#888">&gt;</span>
    <span style="color:#888">&lt;</span><span style="color:#2838b0">h1</span><span style="color:#888"></span><span style="color:#888">&gt;</span>Demo Website<span style="color:#888">&lt;</span><span style="color:#888">/</span><span style="color:#2838b0">h1</span><span style="color:#888">&gt;</span>
    <span style="color:#888">&lt;</span><span style="color:#2838b0">p</span> <span style="color:#388038">class</span><span style="color:#666">=</span><span style="color:#b83838">&#34;description&#34;</span><span style="color:#888"></span><span style="color:#888">&gt;</span>A Magnanimous demo website<span style="color:#888">&lt;</span><span style="color:#888">/</span><span style="color:#2838b0">p</span><span style="color:#888">&gt;</span>
<span style="color:#888">&lt;</span><span style="color:#888">/</span><span style="color:#2838b0">section</span><span style="color:#888">&gt;</span>
<span style="color:#888">&lt;</span><span style="color:#888">/</span><span style="color:#2838b0">header</span><span style="color:#888">&gt;</span>
</pre><div class="file-box">source/processed/_header.html</div><p>Now, create a footer:</p>
<pre style="background-color:#fff"><span style="color:#888">&lt;</span><span style="color:#888">/</span><span style="color:#2838b0">body</span><span style="color:#888">&gt;</span>
<span style="color:#888">&lt;</span><span style="color:#2838b0">footer</span> <span style="color:#388038">class</span><span style="color:#666">=</span><span style="color:#b83838">&#34;footer&#34;</span><span style="color:#888"></span><span style="color:#888">&gt;</span>
    <span style="color:#888">&lt;</span><span style="color:#2838b0">section</span> <span style="color:#388038">class</span><span style="color:#666">=</span><span style="color:#b83838">&#34;container&#34;</span><span style="color:#888"></span><span style="color:#888">&gt;</span>
        <span style="color:#888">&lt;</span><span style="color:#2838b0">p</span><span style="color:#888"></span><span style="color:#888">&gt;</span>This is the website footer<span style="color:#888">&lt;</span><span style="color:#888">/</span><span style="color:#2838b0">p</span><span style="color:#888">&gt;</span>
        <span style="color:#888">&lt;</span><span style="color:#2838b0">p</span><span style="color:#888"></span><span style="color:#888">&gt;</span>Check out the <span style="color:#888">&lt;</span><span style="color:#2838b0">a</span> <span style="color:#388038">href</span><span style="color:#666">=</span><span style="color:#b83838">&#34;https://renatoathaydes.github.io/magnanimous&#34;</span><span style="color:#888"></span><span style="color:#888">&gt;</span>Magnanimous<span style="color:#888">&lt;</span><span style="color:#888">/</span><span style="color:#2838b0">a</span><span style="color:#888">&gt;</span> website.<span style="color:#888">&lt;</span><span style="color:#888">/</span><span style="color:#2838b0">p</span><span style="color:#888">&gt;</span>
    <span style="color:#888">&lt;</span><span style="color:#888">/</span><span style="color:#2838b0">section</span><span style="color:#888">&gt;</span>
<span style="color:#888">&lt;</span><span style="color:#888">/</span><span style="color:#2838b0">footer</span><span style="color:#888">&gt;</span>
<span style="color:#888">&lt;</span><span style="color:#888">/</span><span style="color:#2838b0">html</span><span style="color:#888">&gt;</span>
</pre><div class="file-box">source/processed/_footer.html</div><p>This is the last piece we needed to create full HTML pages! Notice how the header and footer fit together, so we
should <code>include</code> them both in all our HTML and Markdown pages.</p>

<h3>1.2. Create the Home page (index.html)</h3>

<p>We&rsquo;re ready to create the <code>index.html</code> page now!</p>
<pre style="background-color:#fff">{{ include _header.html }}
<span style="color:#888">&lt;</span><span style="color:#2838b0">section</span> <span style="color:#388038">class</span><span style="color:#666">=</span><span style="color:#b83838">&#34;container&#34;</span><span style="color:#888"></span><span style="color:#888">&gt;</span>
    <span style="color:#888">&lt;</span><span style="color:#2838b0">h3</span><span style="color:#888"></span><span style="color:#888">&gt;</span>Creating great Websites<span style="color:#888">&lt;</span><span style="color:#888">/</span><span style="color:#2838b0">h3</span><span style="color:#888">&gt;</span>
    <span style="color:#888">&lt;</span><span style="color:#2838b0">p</span><span style="color:#888"></span><span style="color:#888">&gt;</span>Isn&#39;t this a good looking page?!<span style="color:#888">&lt;</span><span style="color:#888">/</span><span style="color:#2838b0">p</span><span style="color:#888">&gt;</span>
<span style="color:#888">&lt;</span><span style="color:#888">/</span><span style="color:#2838b0">section</span><span style="color:#888">&gt;</span>
{{ include _footer.html }}
</pre><div class="file-box">source/processed/index.html</div><p>Done!</p>

<p><a href="https://github.com/renatoathaydes/magnanimous-tutorial/commit/ed8032fd372de2998aadf3627d17186c7a0d8eeb">GitHub Commit</a></p>

<h3>1.3. Build the website</h3>

<p>Just run Magnanimous:</p>
<pre style="background-color:#fff">$ magnanimous
</pre>
<p>It will print something like this:</p>
<pre style="background-color:#fff">2019/03/09 20:22:14 No global context file defined.
2019/03/09 20:22:14 Creating file target/index.html from source/processed/index.html
2019/03/09 20:22:14 Creating file target/css/milligram.min.css from source/static/css/milligram.min.css
2019/03/09 20:22:14 Magnanimous generated website in 1.766838ms
</pre>
<blockquote>
<p>Don&rsquo;t worry about the <code>No global context file defined</code> message for now&hellip; we&rsquo;ll see later how to use a global
  context to support internationalization and deploying the website to different server root paths.</p>
</blockquote>

<p>Check out the <code>target</code> directory! Your website is there, ready to be served.</p>

<p>Here&rsquo;s what it looks like:</p>

<iframe src="demo/demo-website-part-1.html"
    title="Demo Website V1" width="90%" height="360"></iframe>

<h3>1.4. Serve the website locally</h3>

<p>To serve the website locally during development, we&rsquo;ll need a simple HTTP server.</p>

<p>There&rsquo;s <a href="https://gist.github.com/willurd/5720255">a lot of choices</a> available!</p>

<p>Check also the <a href="get_started.html">Getting Started</a> guide section on</p>

<h2>Part 2 - Solving common problems</h2>

<p>In Part 2, we&rsquo;ll explore common features of Magnanimous and learn how we can use them to solve the most common problems
we&rsquo;re likely to face when building static websites.</p>

<h3>2.1. Adding Navigation</h3>

<p>Most websites require some form of navigation tools, like menu bars or tabs, to let users get around the website.</p>

<p>This implies the website has different pages the user can visit! Let&rsquo;s create a few dummy pages so we can demonstrate
how Magnanimous can help.</p>

<p>By the way, this is a good time to switch from HTML to <a href="https://www.markdownguide.org/">Markdown</a> for content. It&rsquo;s
much easier to write.</p>

<blockquote>
<p>There&rsquo;s a <a href="markdown_guide.html">Markdown Guide</a> in the Magnanimous Docs, check it out if you want to know more about
  Markdown support in Magnanimous.</p>
</blockquote>

<p>Create the following files under the <code>source/processed/sections</code> directory:</p>

<blockquote>
<p>The directory maps directly to the page URL, so files inside <code>source/processed/sections/</code> will be served under the
  <code>sections/</code> URL path (e.g. <code>http://www.example.com/sections/home.html</code>).</p>
</blockquote>
<pre style="background-color:#fff">{{ include /processed/_header.html }}<span style="background-color:#a848a8">
</span><span style="background-color:#a848a8"></span><span style="color:#444">##</span> About
<span style="background-color:#a848a8">
</span><span style="background-color:#a848a8"></span>This website demonstrates some [<span style="color:#2838b0">Magnanimous</span>](<span style="color:#388038">https://renatoathaydes.github.io/magnanimous/</span>) features.<span style="background-color:#a848a8">
</span><span style="background-color:#a848a8"></span><span style="background-color:#a848a8">
</span><span style="background-color:#a848a8"></span>{{ include /processed/_footer.html }}<span style="background-color:#a848a8">
</span></pre><div class="file-box">source/processed/sections/about.md</div><div style="height: 1em;"></div><pre style="background-color:#fff">{{ include /processed/_header.html }}<span style="background-color:#a848a8">
</span><span style="background-color:#a848a8"></span><span style="color:#444">##</span> Contact Us
<span style="background-color:#a848a8">
</span><span style="background-color:#a848a8"></span>Do not hesitate to contact us!<span style="background-color:#a848a8">
</span><span style="background-color:#a848a8"></span><span style="background-color:#a848a8">
</span><span style="background-color:#a848a8"></span>[<span style="color:#2838b0">Click here</span>](<span style="color:#388038">https://renatoathaydes.github.io/magnanimous/</span>) to visit our website.<span style="background-color:#a848a8">
</span><span style="background-color:#a848a8"></span><span style="background-color:#a848a8">
</span><span style="background-color:#a848a8"></span>{{ include /processed/_footer.html }}<span style="background-color:#a848a8">
</span></pre><div class="file-box">source/processed/sections/contact.md</div><p>After running <code>magnanimous</code> again, you can visit the new pages directly on their URL:</p>

<ul>
<li><a href="http://localhost:8080/sections/about.html">http://localhost:8080/sections/about.html</a>.</li>
<li><a href="http://localhost:8080/sections/contact.html">http://localhost:8080/sections/contact.html</a>.</li>
</ul>

<blockquote>
<p>Notice that markdown pages are automatically converted to HTML by Magnanimous (browsers can only show HTML file).</p>
</blockquote>

<p>But users wouldn&rsquo;t be able to find out about these pages unless you linked to them from the home page.</p>

<p>Without Magnanimous, you&rsquo;d need to manually maintain links to the sections in the home page. But Magnanimous makes
it much easier: the <a href="expression_lang.html#for">for</a> instruction lets you generate links to all pages in a particular
directory automatically.</p>

<p>The <code>for</code> instruction we need to add to the header looks like this:</p>
<pre style="background-color:#fff">{{ for section /processed/sections/ }}\
    <span style="color:#888">&lt;</span><span style="color:#2838b0">a</span> <span style="color:#388038">href</span><span style="color:#666">=</span><span style="color:#b83838">&#34;{{ eval section }}&#34;</span> <span style="color:#388038">class</span><span style="color:#666">=</span><span style="color:#b83838">&#34;button&#34;</span><span style="color:#888"></span><span style="color:#888">&gt;</span>{{ eval section }}<span style="color:#888">&lt;</span><span style="color:#888">/</span><span style="color:#2838b0">a</span><span style="color:#888">&gt;</span>
{{ end }}\
</pre>
<blockquote>
<p>The <code>\</code> at the end of the instruction lines escapes the new line in the resulting file, so there won&rsquo;t be lots of
  empty lines in it.</p>
</blockquote>

<p>The <code>for section /processed/sections/</code> line opens a <em>for loop</em> over the files under the <code>/processed/sections</code> directory.
Each file is then assigned to a variable named <code>section</code>.</p>

<p>Next, we create HTML links by calling <code>eval section</code> both in the <code>href</code> and the actual text shown to the users. We&rsquo;ll
improve this later&hellip; but for now, here&rsquo;s what the <code>processed/_header.html</code> file should look like at this point:</p>
<pre style="background-color:#fff"><span style="color:#289870">&lt;!DOCTYPE html&gt;</span>
<span style="color:#888">&lt;</span><span style="color:#2838b0">html</span><span style="color:#888"></span><span style="color:#888">&gt;</span>
<span style="color:#888">&lt;</span><span style="color:#2838b0">head</span><span style="color:#888"></span><span style="color:#888">&gt;</span>
    <span style="color:#888">&lt;</span><span style="color:#2838b0">meta</span> <span style="color:#388038">charset</span><span style="color:#666">=</span><span style="color:#b83838">&#34;utf-8&#34;</span><span style="color:#888"></span><span style="color:#888">&gt;</span>
    <span style="color:#888">&lt;</span><span style="color:#2838b0">title</span><span style="color:#888"></span><span style="color:#888">&gt;</span>Magnanimous Tutorial Website<span style="color:#888">&lt;</span><span style="color:#888">/</span><span style="color:#2838b0">title</span><span style="color:#888">&gt;</span>
    <span style="color:#888">&lt;</span><span style="color:#2838b0">link</span> <span style="color:#388038">rel</span><span style="color:#666">=</span><span style="color:#b83838">&#34;stylesheet&#34;</span> <span style="color:#388038">href</span><span style="color:#666">=</span><span style="color:#b83838">&#34;/css/milligram.min.css&#34;</span><span style="color:#888"></span><span style="color:#888">&gt;</span>
<span style="color:#888">&lt;</span><span style="color:#888">/</span><span style="color:#2838b0">head</span><span style="color:#888">&gt;</span>
<span style="color:#888">&lt;</span><span style="color:#2838b0">body</span><span style="color:#888"></span><span style="color:#888">&gt;</span>
<span style="color:#888">&lt;</span><span style="color:#2838b0">header</span> <span style="color:#388038">id</span><span style="color:#666">=</span><span style="color:#b83838">&#34;home&#34;</span> <span style="color:#388038">class</span><span style="color:#666">=</span><span style="color:#b83838">&#34;header&#34;</span><span style="color:#888"></span><span style="color:#888">&gt;</span>
<span style="color:#888">&lt;</span><span style="color:#2838b0">nav</span> <span style="color:#388038">class</span><span style="color:#666">=</span><span style="color:#b83838">&#34;navigation&#34;</span><span style="color:#888"></span><span style="color:#888">&gt;</span>
    <span style="color:#888">&lt;</span><span style="color:#2838b0">section</span> <span style="color:#388038">class</span><span style="color:#666">=</span><span style="color:#b83838">&#34;container&#34;</span><span style="color:#888"></span><span style="color:#888">&gt;</span>
        <span style="color:#888">&lt;</span><span style="color:#2838b0">a</span> <span style="color:#388038">href</span><span style="color:#666">=</span><span style="color:#b83838">&#34;/index.html&#34;</span> <span style="color:#388038">class</span><span style="color:#666">=</span><span style="color:#b83838">&#34;button&#34;</span><span style="color:#888"></span><span style="color:#888">&gt;</span>Home<span style="color:#888">&lt;</span><span style="color:#888">/</span><span style="color:#2838b0">a</span><span style="color:#888">&gt;</span>
        {{ for section /processed/sections/ }}\
        <span style="color:#888">&lt;</span><span style="color:#2838b0">a</span> <span style="color:#388038">href</span><span style="color:#666">=</span><span style="color:#b83838">&#34;{{ eval section }}&#34;</span> <span style="color:#388038">class</span><span style="color:#666">=</span><span style="color:#b83838">&#34;button&#34;</span><span style="color:#888"></span><span style="color:#888">&gt;</span>{{ eval section }}<span style="color:#888">&lt;</span><span style="color:#888">/</span><span style="color:#2838b0">a</span><span style="color:#888">&gt;</span>
        {{ end }}\
    <span style="color:#888">&lt;</span><span style="color:#888">/</span><span style="color:#2838b0">section</span><span style="color:#888">&gt;</span>
<span style="color:#888">&lt;</span><span style="color:#888">/</span><span style="color:#2838b0">nav</span><span style="color:#888">&gt;</span>
<span style="color:#888">&lt;</span><span style="color:#2838b0">section</span> <span style="color:#388038">class</span><span style="color:#666">=</span><span style="color:#b83838">&#34;container&#34;</span><span style="color:#888"></span><span style="color:#888">&gt;</span>
    <span style="color:#888">&lt;</span><span style="color:#2838b0">h1</span><span style="color:#888"></span><span style="color:#888">&gt;</span>Demo Website<span style="color:#888">&lt;</span><span style="color:#888">/</span><span style="color:#2838b0">h1</span><span style="color:#888">&gt;</span>
    <span style="color:#888">&lt;</span><span style="color:#2838b0">p</span> <span style="color:#388038">class</span><span style="color:#666">=</span><span style="color:#b83838">&#34;description&#34;</span><span style="color:#888"></span><span style="color:#888">&gt;</span>A Magnanimous demo website<span style="color:#888">&lt;</span><span style="color:#888">/</span><span style="color:#2838b0">p</span><span style="color:#888">&gt;</span>
<span style="color:#888">&lt;</span><span style="color:#888">/</span><span style="color:#2838b0">section</span><span style="color:#888">&gt;</span>
<span style="color:#888">&lt;</span><span style="color:#888">/</span><span style="color:#2838b0">header</span><span style="color:#888">&gt;</span>
</pre><div class="file-box">source/processed/_header.html</div><div style="height: 1em;"></div><p>With the new page header, the new <code>About</code> page now looks like this:</p>

<iframe src="demo/demo-website-part-2.html"
    title="Demo Website V1" width="90%" height="360"></iframe>

<p><a href="https://github.com/renatoathaydes/magnanimous-tutorial/commit/cece958b6a4cf5b7b707c915292c296f6f693757">GitHub Commit</a></p>

<h3>2.2 Adding Content Summary</h3>

<p>You may have noticed that the section links on the top of the website show the path to each section file, rather than
the name of the sections. That&rsquo;s because Magnanimous doesn&rsquo;t know what the user-friendly name of each file should be.</p>

<p>But we can tell it! On each section page, we can define a variable called <code>name</code> which can then be used by the header
to display the section name, rather than its path:</p>
<pre style="background-color:#fff">{{ define name &#34;About&#34; }}<span style="background-color:#a848a8">
</span><span style="background-color:#a848a8"></span><span style="background-color:#a848a8">
</span><span style="background-color:#a848a8"></span><span style="color:#444">##</span> About
<span style="background-color:#a848a8">
</span><span style="background-color:#a848a8"></span>...<span style="background-color:#a848a8">
</span></pre>
<p>Now, the header can refer to the <code>name</code> variable on each file (notice we write <code>eval section.name</code> instead of just
<code>eval section</code> for the link&rsquo;s text):</p>
<pre style="background-color:#fff">{{ for section /processed/sections/ }}\
    <span style="color:#888">&lt;</span><span style="color:#2838b0">a</span> <span style="color:#388038">href</span><span style="color:#666">=</span><span style="color:#b83838">&#34;{{ eval section }}&#34;</span> <span style="color:#388038">class</span><span style="color:#666">=</span><span style="color:#b83838">&#34;button&#34;</span><span style="color:#888"></span><span style="color:#888">&gt;</span>{{ eval section.name }}<span style="color:#888">&lt;</span><span style="color:#888">/</span><span style="color:#2838b0">a</span><span style="color:#888">&gt;</span>
{{ end }}\
</pre>
<p>This feature allows us to create summaries of files very easily&hellip; for example, you could put your blog posts under the
<code>processed/blog</code> directory, and add a few definitions on top of each file, like this:</p>
<pre style="background-color:#fff">{{ define name &#34;My first blog post&#34; }}\<span style="background-color:#a848a8">
</span><span style="background-color:#a848a8"></span>{{ define date &#34;2019-03-10&#34; }}\<span style="background-color:#a848a8">
</span><span style="background-color:#a848a8"></span>{{ define abstract &#34;A short discussion about what I want to write about on my blog&#34; }}\<span style="background-color:#a848a8">
</span><span style="background-color:#a848a8"></span><span style="background-color:#a848a8">
</span><span style="background-color:#a848a8"></span><span style="color:#444">##</span> My first blog post
<span style="background-color:#a848a8">
</span><span style="background-color:#a848a8"></span><span style="color:#444">###</span> Abstract
<span style="background-color:#a848a8">
</span><span style="background-color:#a848a8"></span>{{ eval abstract }}\<span style="background-color:#a848a8">
</span><span style="background-color:#a848a8"></span><span style="background-color:#a848a8">
</span><span style="background-color:#a848a8"></span>...<span style="background-color:#a848a8">
</span></pre>
<p>On the blog summary page, you could then list your blog posts:</p>
<pre style="background-color:#fff"><span style="color:#888">&lt;</span><span style="color:#2838b0">h2</span><span style="color:#888"></span><span style="color:#888">&gt;</span>Most recent blog posts:<span style="color:#888">&lt;</span><span style="color:#888">/</span><span style="color:#2838b0">h2</span><span style="color:#888">&gt;</span>
<span style="color:#888">&lt;</span><span style="color:#2838b0">ul</span><span style="color:#888"></span><span style="color:#888">&gt;</span> 
{{ for blog_post /processed/blog }}\
    <span style="color:#888">&lt;</span><span style="color:#2838b0">li</span><span style="color:#888"></span><span style="color:#888">&gt;</span>
        <span style="color:#888">&lt;</span><span style="color:#2838b0">h3</span><span style="color:#888"></span><span style="color:#888">&gt;</span><span style="color:#888">&lt;</span><span style="color:#2838b0">a</span> <span style="color:#388038">href</span><span style="color:#666">=</span><span style="color:#b83838">&#34;{{ eval blog_post }}&#34;</span><span style="color:#888"></span><span style="color:#888">&gt;</span>{{ eval blog_post.name }}<span style="color:#888">&lt;</span><span style="color:#888">/</span><span style="color:#2838b0">a</span><span style="color:#888">&gt;</span><span style="color:#888">&lt;</span><span style="color:#888">/</span><span style="color:#2838b0">h3</span><span style="color:#888">&gt;</span>
        <span style="color:#888">&lt;</span><span style="color:#2838b0">div</span><span style="color:#888"></span><span style="color:#888">&gt;</span>{{ eval blog_post.date  }}<span style="color:#888">&lt;</span><span style="color:#888">/</span><span style="color:#2838b0">div</span><span style="color:#888">&gt;</span>
        <span style="color:#888">&lt;</span><span style="color:#2838b0">div</span><span style="color:#888"></span><span style="color:#888">&gt;</span>{{ eval blog_post.abstract }}<span style="color:#888">&lt;</span><span style="color:#888">/</span><span style="color:#2838b0">div</span><span style="color:#888">&gt;</span>
    <span style="color:#888">&lt;</span><span style="color:#888">/</span><span style="color:#2838b0">li</span><span style="color:#888">&gt;</span>    
{{ end }}\
<span style="color:#888">&lt;</span><span style="color:#888">/</span><span style="color:#2838b0">ul</span><span style="color:#888">&gt;</span>
</pre>
<p>The <a href="expression_lang.html#for"><code>for</code></a> instructions supports sorting and limits:</p>
<pre style="background-color:#fff">{{ for blog_post (sortBy date reverse limit 10) }}\
...
{{ end }}
</pre>
<p><a href="https://github.com/renatoathaydes/magnanimous-tutorial/commit/ab3003ce72267ee2e7c6de1a6185785e22a4de66">GitHub Commit</a></p>

<h3>2.3 Customizing included content</h3>

<p>The navigation bar on our current website now correctly displays the names of the sections and links to the right
paths. However, it does not display the button for the current page differently from the other buttons, which can be
disorientating for users.</p>

<p>To fix that, we need a way to customize the header, so that it applies some extra style on the button for the current
page.</p>

<p>To do that, we&rsquo;ll use the <a href="expression_lang.html#if"><code>if</code></a> instruction, which works like this:</p>
<pre style="background-color:#fff"><span style="color:#888">&lt;</span><span style="color:#2838b0">a</span> <span style="color:#388038">href</span><span style="color:#666">=</span><span style="color:#b83838">&#34;/index.html&#34;</span> 
   <span style="color:#388038">class</span><span style="color:#666">=</span><span style="color:#b83838">&#34;button{{if name != `Home`}} button-outline{{end}}&#34;</span><span style="color:#888"></span><span style="color:#888">&gt;</span>Home<span style="color:#888">&lt;</span><span style="color:#888">/</span><span style="color:#2838b0">a</span><span style="color:#888">&gt;</span>
</pre>
<blockquote>
<p>Notice the use of <code>`</code> (back-ticks) inside the class String to avoid confusion with the surrounding
  double-quotes. Magnanimous allows both back-ticks and double-quotes as String de-markers.</p>
</blockquote>

<p>In plain english: If the current page has defined a <code>name</code> variable with a value different from <code>Home</code>, the
<code>button-outline</code> will be applied to the button, otherwise, it won&rsquo;t.</p>

<p>We haven&rsquo;t defined the name of the Home page yet&hellip; to make this work, we need to add this line to the top of the
<code>index.html</code> file (it must be defined before the header is included):</p>
<pre style="background-color:#fff">{{ define name &#34;Home&#34; }}
</pre>
<p>Next, we add similar <code>if</code>s for the section pages (which already have names!), so that now the HTML header will
look like this:</p>
<pre style="background-color:#fff"><span style="color:#289870">&lt;!DOCTYPE html&gt;</span>
<span style="color:#888">&lt;</span><span style="color:#2838b0">html</span><span style="color:#888"></span><span style="color:#888">&gt;</span>
<span style="color:#888">&lt;</span><span style="color:#2838b0">head</span><span style="color:#888"></span><span style="color:#888">&gt;</span>
    <span style="color:#888">&lt;</span><span style="color:#2838b0">meta</span> <span style="color:#388038">charset</span><span style="color:#666">=</span><span style="color:#b83838">&#34;utf-8&#34;</span><span style="color:#888"></span><span style="color:#888">&gt;</span>
    <span style="color:#888">&lt;</span><span style="color:#2838b0">title</span><span style="color:#888"></span><span style="color:#888">&gt;</span>Magnanimous Tutorial Website<span style="color:#888">&lt;</span><span style="color:#888">/</span><span style="color:#2838b0">title</span><span style="color:#888">&gt;</span>
    <span style="color:#888">&lt;</span><span style="color:#2838b0">link</span> <span style="color:#388038">rel</span><span style="color:#666">=</span><span style="color:#b83838">&#34;stylesheet&#34;</span> <span style="color:#388038">href</span><span style="color:#666">=</span><span style="color:#b83838">&#34;/css/milligram.min.css&#34;</span><span style="color:#888"></span><span style="color:#888">&gt;</span>
<span style="color:#888">&lt;</span><span style="color:#888">/</span><span style="color:#2838b0">head</span><span style="color:#888">&gt;</span>
<span style="color:#888">&lt;</span><span style="color:#2838b0">body</span><span style="color:#888"></span><span style="color:#888">&gt;</span>
<span style="color:#888">&lt;</span><span style="color:#2838b0">header</span> <span style="color:#388038">id</span><span style="color:#666">=</span><span style="color:#b83838">&#34;home&#34;</span> <span style="color:#388038">class</span><span style="color:#666">=</span><span style="color:#b83838">&#34;header&#34;</span><span style="color:#888"></span><span style="color:#888">&gt;</span>
<span style="color:#888">&lt;</span><span style="color:#2838b0">nav</span> <span style="color:#388038">class</span><span style="color:#666">=</span><span style="color:#b83838">&#34;navigation&#34;</span><span style="color:#888"></span><span style="color:#888">&gt;</span>
    <span style="color:#888">&lt;</span><span style="color:#2838b0">section</span> <span style="color:#388038">class</span><span style="color:#666">=</span><span style="color:#b83838">&#34;container&#34;</span><span style="color:#888"></span><span style="color:#888">&gt;</span>
        <span style="color:#888">&lt;</span><span style="color:#2838b0">a</span> <span style="color:#388038">href</span><span style="color:#666">=</span><span style="color:#b83838">&#34;/index.html&#34;</span> 
            <span style="color:#388038">class</span><span style="color:#666">=</span><span style="color:#b83838">&#34;button{{if name != `Home`}} button-outline{{end}}&#34;</span><span style="color:#888"></span><span style="color:#888">&gt;</span>Home<span style="color:#888">&lt;</span><span style="color:#888">/</span><span style="color:#2838b0">a</span><span style="color:#888">&gt;</span>
        {{ for section /processed/sections/ }}\
        <span style="color:#888">&lt;</span><span style="color:#2838b0">a</span> <span style="color:#388038">href</span><span style="color:#666">=</span><span style="color:#b83838">&#34;{{ eval section }}&#34;</span> 
            <span style="color:#388038">class</span><span style="color:#666">=</span><span style="color:#b83838">&#34;button{{if name != section.name}} button-outline{{end}}&#34;</span><span style="color:#888"></span><span style="color:#888">&gt;</span>{{ eval section.name }}<span style="color:#888">&lt;</span><span style="color:#888">/</span><span style="color:#2838b0">a</span><span style="color:#888">&gt;</span>
        {{ end }}\
    <span style="color:#888">&lt;</span><span style="color:#888">/</span><span style="color:#2838b0">section</span><span style="color:#888">&gt;</span>
<span style="color:#888">&lt;</span><span style="color:#888">/</span><span style="color:#2838b0">nav</span><span style="color:#888">&gt;</span>
<span style="color:#888">&lt;</span><span style="color:#2838b0">section</span> <span style="color:#388038">class</span><span style="color:#666">=</span><span style="color:#b83838">&#34;container&#34;</span><span style="color:#888"></span><span style="color:#888">&gt;</span>
    <span style="color:#888">&lt;</span><span style="color:#2838b0">h1</span><span style="color:#888"></span><span style="color:#888">&gt;</span>Demo Website<span style="color:#888">&lt;</span><span style="color:#888">/</span><span style="color:#2838b0">h1</span><span style="color:#888">&gt;</span>
    <span style="color:#888">&lt;</span><span style="color:#2838b0">p</span> <span style="color:#388038">class</span><span style="color:#666">=</span><span style="color:#b83838">&#34;description&#34;</span><span style="color:#888"></span><span style="color:#888">&gt;</span>A Magnanimous demo website<span style="color:#888">&lt;</span><span style="color:#888">/</span><span style="color:#2838b0">p</span><span style="color:#888">&gt;</span>
<span style="color:#888">&lt;</span><span style="color:#888">/</span><span style="color:#2838b0">section</span><span style="color:#888">&gt;</span>
<span style="color:#888">&lt;</span><span style="color:#888">/</span><span style="color:#2838b0">header</span><span style="color:#888">&gt;</span>
</pre>
<p>The navigation buttons will now look highlighted only on the page they refer to:</p>

<iframe src="demo/demo-website-part-2-3-home.html"
    title="Demo Website V1" width="90%" height="250"></iframe>

<p><a href="https://github.com/renatoathaydes/magnanimous-tutorial/commit/cc325b4350967d786f223f36b8328248e9e03b14">GitHub Commit</a></p>

<h3>2.4 The global context</h3>

<p>When you run <code>magnanimous</code>, you&rsquo;ll see the following message:</p>
<pre style="background-color:#fff">2019/03/10 18:49:34 No global context file defined.
</pre>
<p>This means you have not yet defined a global context file. The global context file is just a processed file which
you can use to define global variables that can be used anywhere.</p>

<p>By default, the global context file is located at <code>source/processed/_global_context</code>, but you can set it to another
file by using the <code>-globalctx</code> option (the path must be relative to <code>source/processed</code>:</p>
<pre style="background-color:#fff">$ magnanimous -globalctx _local_global_context
</pre>
<p>This may seem like a bad idea, but it&rsquo;s extremely useful to solve problems like internationalization and making links
that work on different environments. In the next couple of sections we&rsquo;ll see how we can do that.</p>

<h4>2.4.1 Supporting multiple base paths</h4>

<p>When your website is not going to be served from the root path <code>/</code>, you will run into trouble with absolute links.</p>

<p>That&rsquo;s because absolute links will point to the server&rsquo;s root path, but your website will not be there!</p>

<p>For example, if you deploy your website to <a href="https://pages.github.com/">GitHub Pages</a>
(as we&rsquo;re going to do soon!), the URL to your website will look like this:</p>
<pre style="background-color:#fff">https://username.github.io/projectname/
</pre>
<blockquote>
<p>This website itself, by the way, is hosted on Github!!
  <a href="https://renatoathaydes.github.io/magnanimous/">https://renatoathaydes.github.io/magnanimous/</a>.</p>
</blockquote>

<p>Notice that the root path is <code>/projectname</code>, so absolute links to a page under <code>source/processed/example/file.html</code>
need to look like <code>/projectname/example/file.html</code>, not just <code>/example/file.html</code> as you in your local machine!</p>

<p>To fix this, you can use the global context to define the <code>basePath</code> of your website, which may be different depending
on where you deploy it to.</p>

<p>Let&rsquo;s say we want to be able to both deploy the website locally, as we&rsquo;ve been doing, and to
<a href="https://pages.github.com/">GitHub Pages</a>, and that our
project name on GitHub is <code>magnanimous-tutorial</code>.</p>

<p>Then, we could define the following 2 global context files:</p>
<pre style="background-color:#fff">Global context for local deployment: the website will be under the web server&#39;s root path
{{ define basePath &#34;&#34; }}
</pre><div class="file-box">source/processed/_global_context</div><p>And:</p>
<pre style="background-color:#fff">GitHub Pages context file
{{ define basePath &#34;/magnanimous-tutorial&#34; }}
</pre><div class="file-box">source/processed/_github_global_context</div><p>Now, we need to change every <strong>link</strong> in the website to take into consideration the <code>basePath</code> variable.</p>

<p>There&rsquo;s a whole chapter on <a href="paths.html">Paths and Links</a> as it&rsquo;s easy to confuse the two. But suffice it to say that
links are things you want the browser to resolve, and paths are things you want Magnanimous to resolve.</p>

<p>Given this knowledge, it&rsquo;s easy to understand why things like <code>include</code> instructions work without the base path,
but things like links to stylesheets require it.</p>

<p>Every link we&rsquo;ve added to the demo website so far is in the header page, so it&rsquo;s pretty easy to change them:</p>

<ul>
<li>stylesheet import:</li>
</ul>
<pre style="background-color:#fff"><span style="color:#888">&lt;</span><span style="color:#2838b0">link</span> <span style="color:#388038">rel</span><span style="color:#666">=</span><span style="color:#b83838">&#34;stylesheet&#34;</span> <span style="color:#388038">href</span><span style="color:#666">=</span><span style="color:#b83838">&#34;{{eval basePath}}/css/milligram.min.css&#34;</span><span style="color:#888"></span><span style="color:#888">&gt;</span>
</pre>
<ul>
<li>section links:</li>
</ul>
<pre style="background-color:#fff"><span style="color:#888">&lt;</span><span style="color:#2838b0">a</span> <span style="color:#388038">href</span><span style="color:#666">=</span><span style="color:#b83838">&#34;{{eval basePath}}/index.html&#34;</span> 
    <span style="color:#388038">class</span><span style="color:#666">=</span><span style="color:#b83838">&#34;button{{if name != `Home`}} button-outline{{end}}&#34;</span><span style="color:#888"></span><span style="color:#888">&gt;</span>Home<span style="color:#888">&lt;</span><span style="color:#888">/</span><span style="color:#2838b0">a</span><span style="color:#888">&gt;</span>
{{ for section /processed/sections/ }}\
<span style="color:#888">&lt;</span><span style="color:#2838b0">a</span> <span style="color:#388038">href</span><span style="color:#666">=</span><span style="color:#b83838">&#34;{{ eval basePath + section }}&#34;</span> 
    <span style="color:#388038">class</span><span style="color:#666">=</span><span style="color:#b83838">&#34;button{{if name != section.name}} button-outline{{end}}&#34;</span><span style="color:#888"></span><span style="color:#888">&gt;</span>{{ eval section.name }}<span style="color:#888">&lt;</span><span style="color:#888">/</span><span style="color:#2838b0">a</span><span style="color:#888">&gt;</span>
{{ end }}\
</pre>
<p>And that&rsquo;s it!</p>

<p><a href="https://github.com/renatoathaydes/magnanimous-tutorial/commit/1550af30a6da9f09c1e8b09c3f7d4a7cb45ea12b">GitHub Commit</a></p>

<h2>Part 3 - Publishing the website on GitHub Pages</h2>

<p>At this point, you have two ways of building your website:</p>

<ul>
<li><p>to deploy locally, you just do as you&rsquo;ve been doing so far:</p>
<pre style="background-color:#fff">$ magnanimous
</pre></li>

<li><p>to build it with the Github project name as the base path, for publication on GitHub Pages:</p>
<pre style="background-color:#fff">$ magnanimous -globalctx _github_global_context
</pre></li>
</ul>

<p>Reading the output, you can make sure Magnanimous picked up the right global context file:</p>
<pre style="background-color:#fff">2019/03/10 20:23:44 Using global context file: source/processed/_github_global_context
2019/03/10 20:23:44 Creating file target/sections/about.html from source/processed/sections/about.md
2019/03/10 20:23:44 Creating file target/sections/contact.html from source/processed/sections/contact.md
2019/03/10 20:23:44 Creating file target/css/milligram.min.css from source/static/css/milligram.min.css
2019/03/10 20:23:44 Creating file target/index.html from source/processed/index.html
2019/03/10 20:23:44 Magnanimous generated website in 5.581399ms
</pre>
<p>We are now almost ready to publish the website on GitHub Pages.</p>

<p>Just one last thing: GitHub Pages lets you use the master branch as the deployment branch, but you want only
the files in the <code>target</code> directory to be deployed&hellip; luckily they also let you configure a directory as the root of
your website, but the directory must be called <code>docs</code> for some reason!</p>

<p>So just make sure to move the files there when you want to deploy:</p>
<pre style="background-color:#fff">$ mv target docs
</pre>
<p>And then <code>git push</code>! Your website should now be available online!</p>

<p><a href="https://renatoathaydes.github.io/magnanimous-tutorial/">Here&rsquo;s the one</a> we&rsquo;ve created in this Tutorial!</p>

<p>And of course, all the code written in this Tutorial is <a href="https://github.com/renatoathaydes/magnanimous-tutorial">available on GitHub</a>.</p>

<p>In the next Tutorial, we&rsquo;re going to add internationalization to our website (so that users who speak other languages
can also read it in their own languages) and learn how to use Magnanimous <a href="components.html">components and slots</a>,
which will allow us to re-use template snippets very effectively.</p>
</div>
<div class="footer">
    <div>
        <small>
            Back to <a href="/magnanimous/sections/docs.html">Documentation Home</a>
        </small>
    </div>
</div>
</body>
</html>